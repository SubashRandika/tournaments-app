{"ast":null,"code":"var _jsxFileName = \"D:\\\\Coding Challenges\\\\BAYES\\\\tournaments-app\\\\src\\\\containers\\\\TournamentsView\\\\TournamentsView.js\";\nimport React, { Component } from 'react';\nimport TournamentsList from '../../components/TournamentsList/TournamentsList';\nimport axios from 'axios';\nimport jsonServerConfig from '../../configurations/json-server';\nimport Grid from '@material-ui/core/Grid';\nimport SearchBar from '../SearchBar/SearchBar';\nimport _ from 'lodash';\n\nclass TournamentsView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSetFilterBy = filterKey => {\n      this.setState({\n        filterBy: filterKey\n      });\n    };\n\n    this.handleSearch = (filterField, inputValue) => {\n      if (inputValue.length === 0) {\n        this.getAllTournamentsService();\n      } else {\n        const filteredTournaments = _.filter(this.state.tournaments, tournament => {\n          if (filterField === 'name') {\n            return _.includes(_.toLower(tournament.series[filterField]), _.toLower(inputValue));\n          } else {\n            return _.includes(tournament.series[filterField], inputValue);\n          }\n        });\n\n        this.setState({\n          tournaments: filteredTournaments\n        });\n      }\n    };\n\n    const host = jsonServerConfig.host,\n          port = jsonServerConfig.port;\n    this.url = \"http://\".concat(host, \":\").concat(port);\n    this.tournamentsUrl = \"\".concat(this.url, \"/tournaments\");\n    this.state = {\n      tournaments: [],\n      isLoaded: false,\n      errorMessage: '',\n      filterBy: 'name'\n    };\n  }\n\n  componentDidMount() {\n    // This is for purely demonstrate how spinner displays in a slowness of data fetching.\n    // Only in development testing.\n    setTimeout(() => {\n      this.getAllTournamentsService();\n    }, 1000);\n  }\n\n  async getAllTournamentsService() {\n    try {\n      const response = await axios.get(this.tournamentsUrl);\n      this.setState({\n        tournaments: response.data,\n        isLoaded: true\n      });\n    } catch (error) {\n      this.setState({\n        errorMessage: 'Error occurred while loading tournaments.',\n        isLoaded: true\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(Grid, {\n      container: true,\n      spacing: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      md: 12,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(SearchBar, {\n      onSearch: this.handleSearch,\n      filterKey: this.state.filterBy,\n      setFilterBy: this.handleSetFilterBy,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      md: 12,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(TournamentsList, {\n      tournamentState: this.state,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default TournamentsView;","map":{"version":3,"sources":["D:\\Coding Challenges\\BAYES\\tournaments-app\\src\\containers\\TournamentsView\\TournamentsView.js"],"names":["React","Component","TournamentsList","axios","jsonServerConfig","Grid","SearchBar","_","TournamentsView","constructor","props","handleSetFilterBy","filterKey","setState","filterBy","handleSearch","filterField","inputValue","length","getAllTournamentsService","filteredTournaments","filter","state","tournaments","tournament","includes","toLower","series","host","port","url","tournamentsUrl","isLoaded","errorMessage","componentDidMount","setTimeout","response","get","data","error","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport TournamentsList from '../../components/TournamentsList/TournamentsList';\r\nimport axios from 'axios';\r\nimport jsonServerConfig from '../../configurations/json-server';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport SearchBar from '../SearchBar/SearchBar';\r\nimport _ from 'lodash';\r\n\r\nclass TournamentsView extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst { host, port } = jsonServerConfig;\r\n\t\tthis.url = `http://${host}:${port}`;\r\n\t\tthis.tournamentsUrl = `${this.url}/tournaments`;\r\n\r\n\t\tthis.state = {\r\n\t\t\ttournaments: [],\r\n\t\t\tisLoaded: false,\r\n\t\t\terrorMessage: '',\r\n\t\t\tfilterBy: 'name'\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// This is for purely demonstrate how spinner displays in a slowness of data fetching.\r\n\t\t// Only in development testing.\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.getAllTournamentsService();\r\n\t\t}, 1000);\r\n\t}\r\n\r\n\tasync getAllTournamentsService() {\r\n\t\ttry {\r\n\t\t\tconst response = await axios.get(this.tournamentsUrl);\r\n\t\t\tthis.setState({\r\n\t\t\t\ttournaments: response.data,\r\n\t\t\t\tisLoaded: true\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrorMessage: 'Error occurred while loading tournaments.',\r\n\t\t\t\tisLoaded: true\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSetFilterBy = (filterKey) => {\r\n\t\tthis.setState({\r\n\t\t\tfilterBy: filterKey\r\n\t\t});\r\n\t};\r\n\r\n\thandleSearch = (filterField, inputValue) => {\r\n\t\tif (inputValue.length === 0) {\r\n\t\t\tthis.getAllTournamentsService();\r\n\t\t} else {\r\n\t\t\tconst filteredTournaments = _.filter(this.state.tournaments, (tournament) => {\r\n\t\t\t\tif (filterField === 'name') {\r\n\t\t\t\t\treturn _.includes(_.toLower(tournament.series[filterField]), _.toLower(inputValue));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn _.includes(tournament.series[filterField], inputValue);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.setState({\r\n\t\t\t\ttournaments: filteredTournaments\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item md={12} xs={12}>\r\n\t\t\t\t\t<SearchBar\r\n\t\t\t\t\t\tonSearch={this.handleSearch}\r\n\t\t\t\t\t\tfilterKey={this.state.filterBy}\r\n\t\t\t\t\t\tsetFilterBy={this.handleSetFilterBy}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={12} xs={12}>\r\n\t\t\t\t\t<TournamentsList tournamentState={this.state} />\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TournamentsView;\r\n"]},"metadata":{},"sourceType":"module"}