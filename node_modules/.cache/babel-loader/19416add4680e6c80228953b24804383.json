{"ast":null,"code":"var _jsxFileName = \"D:\\\\Coding Challenges\\\\BAYES\\\\tournaments-app\\\\src\\\\containers\\\\TournamentsView\\\\TournamentsView.js\";\nimport React, { Component } from 'react';\nimport TournamentsList from '../../components/TournamentsList/TournamentsList';\nimport axios from 'axios';\nimport jsonServerConfig from '../../configurations/json-server';\nimport Grid from '@material-ui/core/Grid';\nimport SearchBar from '../SearchBar/SearchBar';\n\nclass TournamentsView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSetFilterBy = filterKey => {\n      this.setState({\n        filterBy: filterKey\n      });\n    };\n\n    this.handleSearch = (filterField, inputValue) => {\n      if (this.sat) {\n        this.getAllTournamentsService();\n      } else {\n        this.getFilteredTournaments(filterField, inputValue);\n      }\n    };\n\n    const host = jsonServerConfig.host,\n          port = jsonServerConfig.port;\n    this.url = \"http://\".concat(host, \":\").concat(port);\n    this.tournamentsUrl = \"\".concat(this.url, \"/tournaments\");\n    this.state = {\n      tournaments: [],\n      isLoaded: false,\n      errorMessage: '',\n      filterBy: 'name',\n      query: ''\n    };\n    this.cancel = '';\n  }\n\n  componentDidMount() {\n    // This is for purely demonstrate how spinner displays in a slowness of data fetching.\n    // Only in development testing.\n    setTimeout(() => {\n      this.getAllTournamentsService();\n    }, 1000);\n  }\n\n  async getAllTournamentsService() {\n    try {\n      const response = await axios.get(this.tournamentsUrl);\n      this.setState({\n        tournaments: response.data,\n        isLoaded: true\n      });\n    } catch (error) {\n      this.setState({\n        errorMessage: 'Error occurred while loading tournaments.',\n        isLoaded: true\n      });\n    }\n  }\n\n  async getFilteredTournaments(filterField, inputValue) {\n    try {\n      this.setState({\n        query: inputValue\n      });\n      const filterUrl = \"\".concat(this.tournamentsUrl, \"?series.\").concat(filterField, \"_like=\").concat(inputValue);\n\n      if (this.cancel) {\n        this.cancel.cancel();\n      }\n\n      this.cancel = axios.CancelToken.source();\n      const response = await axios.get(filterUrl, {\n        cancelToken: this.cancel.token\n      });\n      this.setState({\n        tournaments: response.data,\n        isLoaded: true\n      });\n    } catch (error) {\n      if (error || axios.isCancel(error)) {\n        this.setState({\n          errorMessage: 'Error occurred while filtering tournaments.',\n          isLoaded: true\n        });\n      }\n    }\n  }\n\n  render() {\n    return React.createElement(Grid, {\n      container: true,\n      spacing: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      md: 12,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(SearchBar, {\n      onSearch: this.handleSearch,\n      filterKey: this.state.filterBy,\n      query: this.state.query,\n      setFilterBy: this.handleSetFilterBy,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      md: 12,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(TournamentsList, {\n      tournamentState: this.state,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default TournamentsView;","map":{"version":3,"sources":["D:\\Coding Challenges\\BAYES\\tournaments-app\\src\\containers\\TournamentsView\\TournamentsView.js"],"names":["React","Component","TournamentsList","axios","jsonServerConfig","Grid","SearchBar","TournamentsView","constructor","props","handleSetFilterBy","filterKey","setState","filterBy","handleSearch","filterField","inputValue","sat","getAllTournamentsService","getFilteredTournaments","host","port","url","tournamentsUrl","state","tournaments","isLoaded","errorMessage","query","cancel","componentDidMount","setTimeout","response","get","data","error","filterUrl","CancelToken","source","cancelToken","token","isCancel","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport TournamentsList from '../../components/TournamentsList/TournamentsList';\r\nimport axios from 'axios';\r\nimport jsonServerConfig from '../../configurations/json-server';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport SearchBar from '../SearchBar/SearchBar';\r\n\r\nclass TournamentsView extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst { host, port } = jsonServerConfig;\r\n\t\tthis.url = `http://${host}:${port}`;\r\n\t\tthis.tournamentsUrl = `${this.url}/tournaments`;\r\n\r\n\t\tthis.state = {\r\n\t\t\ttournaments: [],\r\n\t\t\tisLoaded: false,\r\n\t\t\terrorMessage: '',\r\n\t\t\tfilterBy: 'name',\r\n\t\t\tquery: ''\r\n\t\t};\r\n\r\n\t\tthis.cancel = '';\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// This is for purely demonstrate how spinner displays in a slowness of data fetching.\r\n\t\t// Only in development testing.\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.getAllTournamentsService();\r\n\t\t}, 1000);\r\n\t}\r\n\r\n\tasync getAllTournamentsService() {\r\n\t\ttry {\r\n\t\t\tconst response = await axios.get(this.tournamentsUrl);\r\n\t\t\tthis.setState({\r\n\t\t\t\ttournaments: response.data,\r\n\t\t\t\tisLoaded: true\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrorMessage: 'Error occurred while loading tournaments.',\r\n\t\t\t\tisLoaded: true\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tasync getFilteredTournaments(filterField, inputValue) {\r\n\t\ttry {\r\n\t\t\tthis.setState({\r\n\t\t\t\tquery: inputValue\r\n\t\t\t});\r\n\t\t\tconst filterUrl = `${this.tournamentsUrl}?series.${filterField}_like=${inputValue}`;\r\n\r\n\t\t\tif (this.cancel) {\r\n\t\t\t\tthis.cancel.cancel();\r\n\t\t\t}\r\n\r\n\t\t\tthis.cancel = axios.CancelToken.source();\r\n\t\t\tconst response = await axios.get(filterUrl, {\r\n\t\t\t\tcancelToken: this.cancel.token\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\ttournaments: response.data,\r\n\t\t\t\tisLoaded: true\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tif (error || axios.isCancel(error)) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrorMessage: 'Error occurred while filtering tournaments.',\r\n\t\t\t\t\tisLoaded: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleSetFilterBy = (filterKey) => {\r\n\t\tthis.setState({\r\n\t\t\tfilterBy: filterKey\r\n\t\t});\r\n\t};\r\n\r\n\thandleSearch = (filterField, inputValue) => {\r\n\t\tif (this.sat) {\r\n\t\t\tthis.getAllTournamentsService();\r\n\t\t} else {\r\n\t\t\tthis.getFilteredTournaments(filterField, inputValue);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item md={12} xs={12}>\r\n\t\t\t\t\t<SearchBar\r\n\t\t\t\t\t\tonSearch={this.handleSearch}\r\n\t\t\t\t\t\tfilterKey={this.state.filterBy}\r\n\t\t\t\t\t\tquery={this.state.query}\r\n\t\t\t\t\t\tsetFilterBy={this.handleSetFilterBy}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={12} xs={12}>\r\n\t\t\t\t\t<TournamentsList tournamentState={this.state} />\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TournamentsView;\r\n"]},"metadata":{},"sourceType":"module"}